name: Build RAPIDS pip wheel CI images

on:
  pull-request:

  push:
    branches:
      - "main"
  workflow_dispatch:

concurrency:
  group: "${{ github.workflow }}-${{ github.ref }}"
  cancel-in-progress: true

jobs:
  #cibw-containers:
  #  uses: ./.github/workflows/docker-multiarch-native.yml
  #  secrets: inherit
  #  with:
  #    matrix_script: "./ci/compute-cibw-matrix.sh"
  #    push: true
  #    build_type: branch
  manylinux-containers:
    uses: ./.github/workflows/docker-multiarch-native.yml
    secrets: inherit
    with:
      matrix_script: "./ci/compute-manylinux-matrix.sh"
      push: true
      build_type: branch
